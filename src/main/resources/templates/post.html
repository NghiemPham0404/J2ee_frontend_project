<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Quản lý Bài viết</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/home.css" th:href="@{/css/home.css}" rel="stylesheet">
</head>
<style>
  #PendingTable td:nth-child(5),
  #MyTable td:nth-child(4){
    vertical-align: middle;
    text-align: center;
  }

  .button-group {
    display: flex;
    gap: 10px;
    align-items: flex-start;
    margin-bottom: 20px;
  }
  .active-btn {
      background: linear-gradient(195deg, #c2e59c 0%, #64b3f4 100%);
     color:white;
     border:none;
    }
</style>
<body>
<div th:replace="~{header :: navbar}"></div>
<div class="container mt-5">
  <h1 class="text-center">Quản lý Bài viết</h1>

  <!-- Tìm kiếm bài viết -->
  <div class="row mb-2 mt-4">
    <div class="col-md-10 offset-md-1">
      <div class="input-group mb-3">
        <input type="text" id="searchInput" class="form-control" placeholder="Tìm kiếm bài viết..." />
        <button class="btn btn-primary" onclick="searchProjects()">Tìm kiếm</button>
      </div>
    </div>
  </div>

  <!-- Filters Section -->
  <div class="row mb-4">
    <div class="col-md-10 offset-md-1">
      <div class="d-flex justify-content-between align-items-center">
        <div class="input-group mx-2" style="max-width: 250px;">
          <label for="startDate" class="form-label mt-2">Ngày bắt đầu: </label>&nbsp;
          <input type="date" id="startDate" class="form-control" />
        </div>

        <div class="input-group mx-2" style="max-width: 250px;">
          <label for="endDate" class="form-label mt-2">Ngày kết thúc:</label>&nbsp;
          <input type="date" id="endDate" class="form-control" />
        </div>

        <div class="input-group mx-2" style="max-width: 250px;">
          <label for="viewRange" class="form-label">Số lượt xem:</label>
          <input type="range" id="viewRange" class="form-range" min="0" max="1000000" step="100" value="1000000" onchange="updateViewRangeValue()" />
          <span id="viewRangeValue">1,000,000 lượt xem</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Button group for "Tạo bài viết mới" and "Bài viết đang duyệt" -->


  <!-- Bảng quản lý bài viết -->
  <div class="button-group">
    <button class="btn btn-outline-primary active-btn" id="my-btn"onclick="MyPost()">Bài viết của tôi</button>
    <button class="btn btn-outline-primary" id="pend-btn" onclick="PendingPost()">Bài viết đang duyệt</button>
  </div>
  <div class="button-group">
    <h2 id="labelpost"> Bài viết của tôi</h2>
    <a href="/posts/new" class="btn btn-primary">Tạo bài viết mới</a>
  </div>
  <div class="row">
    <div class="col-md-10 offset-md-1">
      <table class="table table-bordered" id="MyTable">
        <thead>
        <tr>
          <th>ID</th>
          <th>Tiêu đề</th>
          <th>Ngày đăng</th>
          <th>Hình ảnh</th>
          <th>Lượt xem</th>
          <th>Hành động</th>
        </tr>
        </thead>
        <tbody id="postTableBody">
        <tr>
          <td>1</td>
          <td>Tiêu đề bài viết 1</td>
          <td>01/01/2024</td>
          <td><img src="/img/Demo_2.webp" alt="Thumb" style="width: 50px; height: auto;"></td>
          <td>150</td>
          <td>
            <button class="btn btn-outline-primary btn-sm" onclick="editPost('1')">Sửa</button>
            <button class="btn btn-outline-del btn-sm" onclick="deletePost('1')">Xóa</button>
          </td>
        </tr>
        </tbody>
      </table>
      <table class="table table-bordered" id="PendingTable" style="display:none">
        <thead>
        <tr>
          <th>ID</th>
          <th>Người đăng</th>
          <th>Tiêu đề</th>
          <th>Ngày đăng</th>
          <th>Hình ảnh</th>

          <th>Hành động</th>
        </tr>
        </thead>
        <tbody id="pendingTableBody">
        <tr>
          <td>2</td>
          <td>Thiệu Huy</td>
          <td>Tiêu đề bài viết chờ duyệt</td>
          <td>7/11/2024</td>
          <td><img src="/img/Demo_2.webp" alt="Thumb" style="width: 50px; height: auto;"></td>

          <td>
            <button class="btn btn-outline-primary btn-sm" onclick="editPost('1')">Sửa</button>
            <button class="btn btn-outline-del btn-sm" onclick="deletePost('1')">Xóa</button>
          </td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<script>
  // Hàm tìm kiếm bài viết
  function searchPosts() {
    const searchInput = document.getElementById('searchInput').value;
    alert('Tìm kiếm bài viết với từ khóa: ' + searchInput);
  }

  // Hàm thêm bài viết
  function addPost() {
    const title = document.getElementById('title').value;
    const body = document.getElementById('body').value;
    const thumbImg = document.getElementById('thumbImg').value;
    alert('Bài viết mới đã được thêm:\n' + title + '\n' + body);
  }

  // Hàm sửa bài viết
  function editPost(postId) {
    alert('Chỉnh sửa bài viết có ID: ' + postId);
  }

  // Hàm xóa bài viết
  function deletePost(postId) {
    if (confirm('Bạn có chắc chắn muốn xóa bài viết này không?')) {
      alert('Bài viết có ID ' + postId + ' đã được xóa.');
    }
  }

  // Hàm tạo bài viết mới
  function createNewPost() {
    alert('Chuyển đến trang tạo bài viết mới');
  }

  // Hàm xem bài viết đang duyệt
  function viewUnderReviewPosts() {
    alert('Hiển thị bài viết đang duyệt');
  }

  // Cập nhật giá trị của thanh trượt lượt xem
  function updateViewRangeValue() {
    const viewRange = document.getElementById('viewRange');
    const viewRangeValue = document.getElementById('viewRangeValue');
    const viewRangeValueFormatted = formatView(viewRange.value);
    viewRangeValue.textContent = `${viewRangeValueFormatted} lượt xem`;
  }

  function formatView(value) {
    return Number(value).toLocaleString();
  }
  function PendingPost(){
  document.getElementById('labelpost').textContent = 'Bài viết đang duyệt';
  document.getElementById('my-btn').classList.remove('active-btn');
  document.getElementById('pend-btn').classList.add('active-btn');
  document.getElementById('MyTable').style.display="none";
  document.getElementById('PendingTable').style.display="table";
}
  function MyPost(){
  document.getElementById('labelpost').textContent = 'Bài viết của tôi';
  document.getElementById('my-btn').classList.add('active-btn');
  document.getElementById('pend-btn').classList.remove('active-btn');
  document.getElementById('MyTable').style.display="table";
  document.getElementById('PendingTable').style.display="none";
}
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
